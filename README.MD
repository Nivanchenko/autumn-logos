# autumn-logos - Компонент ОСени, для внедрения логгера. 

Компонент [ОСени](https://github.com/nixel2007/autumn), для внедрения [логгера](https://github.com/oscript-library/logos). Удобная аннотация - обертка для получения объекта логгера.

## Подключение

```bsl
#Использовать autumn
#Использовать autumn-logos

// теперь вам доступны логгеры

```

## Использование. 

Допустим у вас есть ```Желудь```. В его поле вы можете внедрить класс ```Лог``` из библиотеки [logos](https://github.com/oscript-library/logos). Внедрение осуществляется по всем правилам ```Пластелина```

Для внедрения используется аннотация ```&Лог("Префикс.библиотеки")```. Аннотация имеет один параметр, содержащий префикс. Допускается также использование аннотации без параметра.

Результатом внедрения будет объект типа ```Лог```. Общая логика такая: 

```Лог = Логирование.ПолучитьЛог(ПереданныйПрефикс + "." + ИмяКлассаВКоторыйВнедряетсяЛог)```

У аннотации ```Лог``` есть второй параметр, который отключает добавление имени класса в конце. И аннотация имеет вид ```&Лог(Значение = "Префикс.библиотеки", УчитыватьИмяКласса = Ложь)```.

```bsl
&Лог(Значение = "my.logger.DEBUG", УчитыватьИмяКласса = Ложь)
Перем ЛогБезИмениКлассаСДебагом;
```

## Пример:

```Файл: МойКласс.os```

```bsl

&Лог(Значение = "Префикс.Лог.БезИмениКласса", УчитыватьИмяКласса = Ложь)
Перем ЛогБезИмениКласса;

&Лог("Префикс.Лог.ВЭкспортромПоле")
Перем ЭкспортныйЛог Экспорт;

&Лог // лог без префикса
Перем ЛогБезПрефикса Экспорт;

Перем _ПриватныйЛог;
Перем ЛогСеттером;

&Желудь
Процедура ПриСозданииОбъекта(
	&Лог("Префикс.Лог.ВКонструкторе") ЛогВКонструкторе
	)
	_ПриватныйЛог = ЛогВКонструкторе;
КонецПроцедуры

Функция ПриватныйЛог() Экспорт
	Возврат _ПриватныйЛог;
КонецФункции

&Лог("Префикс.Лог.ВСеттере")
Процедура УстановитьЛогСеттером(Значение) Экспорт
	ЛогСеттером = Значение;
КонецПроцедуры

Функция ПолучитьЛогСеттером() Экспорт
	Возврат ЛогСеттером;
КонецФункции
```

## Конфигурирование

Настройка логов осуществляется через файл ```autumn-properties.json``` или ```autumn-properties.yaml```. Структура настроек очень близка к оригинальной библиотеке [logos](https://github.com/oscript-library/logos).

```json
{
    "logos": {
      "logger": { // Описание уровней логов, и ссылки на применяемые аппендеры.
        "rootLogger": {"level":"WARN"},
        "my.logger.DEBUG": {"level":"DEBUG"},
        "my.logger.INFO": {"level":"INFO"},
        "my.logger.WARN": {"level":"WARN"},
        "my.logger.ERROR": {"level":"ERROR"},
        "my.logger.CRITICALERROR": {"level":"CRITICALERROR"},
        "my.logger.DISABLE": {"level":"DISABLE"},
        "my.logger.DEFAULT": {"level":"DEFAULT"},
        "my.logger.fileappender": {"level":"DEBUG", "appenders": "debugfile"},
        "my.logger.consoleappender": {"level":"INFO", "appenders": "debugfile, consoledebug"}
     },
     "appender": { // Настройки аппендеров
         "debugfile": {
             "type": "ВыводЛогаВФайл",
             "level": "DEBUG",
             "file": "tests/log/fileappender.log"
         },
         "consoledebug": {
            "type": "ВыводЛогаВКонсоль",
            "level": "DEBUG"
        }
     }
    } 
  }
```

## Применение для конфигурирования.

Так же можно применять библиотеку для конфигурирования логов, но без внедрения непосредственно через пластилин. 

```bsl
#Использовать autumn
#Использовать autumn-logos

// Инициализация контекста осени. В этот момент будут произведены настройки логов из файла autumn-properties.json или autumn-properties.yaml
Поделка = Новый Поделка(); 

// Получение настроенного лога.
ЛогОтладка = Логирование.ПолучитьЛог("my.logger.DEBUG"); 
```

